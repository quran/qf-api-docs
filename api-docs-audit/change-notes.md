# API Docs Alignment Summary

## Overview
- Added coverage for previously undocumented v4 endpoints (audio catalog, mushaf metadata, hizb/manzil/ruku resources, footnotes, etc.).
- Replaced legacy hard-coded glyph endpoints with `/quran/verses/{script}` and enumerated supported scripts.
- Synced every documented operation with the live API responses/parameters (examples, status codes, pagination, boolean flags).
- Restored the `segments` query parameter for chapter-recitation playback endpoints and propagated it to the generated OpenAPI.
- Normalised autogenerated cross-links so descriptions reference concrete paths (for example `GET /audio/qaris`, `GET /resources/translations`).

## Tooling Updates
- Introduced `scripts/api_docs_audit.py` to convert the Stoplight Swagger, normalise routes, and produce the diff artefacts under `api-docs-audit/`.
- Added `scripts/update_v4_spec.py` to regenerate `openAPI/content/v4.json` from the source spec while applying metadata/parameter overrides and sanitising legacy tokens.
- Added `scripts/check_missing.py` helper to assert every operation emits a `summary` or `operationId` before running the Docusaurus generator.

## Documentation Artefacts
- Regenerated `openAPI/content/v4.json` and the derived Docusaurus MDX files so the docs now include:
  - Audio catalog endpoints (`/audio/qaris`, `/audio/sections`, `/audio/surahs/{id}`).
  - Metadata endpoints (`/mushafs`, `/hizbs`, `/manzils`, `/rukus`, `/rub_el_hizbs`, `/foot_notes/{id}`).
  - The dynamic glyph endpoint `/quran/verses/{script}` with script enum and segments examples.
  - Updated examples for recitations, chapter info, tafsirs, translations, and verse listings (pagination, timing segments, slugs typos fixed).
- Regenerated `api-docs-audit/*` reports (`summary.md`, `coverage.md`, `discrepancies.json`, `examples-mismatch.md`, `openapi.generated.yaml`) which now report “Docs align with code”.

## Reliability Checks
- Ran `scripts/update_v4_spec.py` to rebuild the doc spec and `scripts/api_docs_audit.py` to ensure zero discrepancies remain.
- Verified all operations now have `summary`/`operationId`, preventing the Docusaurus `gen-api-docs` failures you observed during `yarn start`.
